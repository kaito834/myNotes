This is my tutorial for [Yubikey](https://www.yubico.com/products/yubikey-hardware/), multi protocol USB security keys developed by Yubico.

# Use Yubikey at 2 Factor Authentication(2FA)
## My Environments
- [Yubikey 4](https://www.yubico.com/products/yubikey-hardware/yubikey4/)
  * Bought via [Amazon.co.jp](https://www.amazon.co.jp/gp/product/B018Y1Q71M/)
- Windows 10 Professional
- [Yubico Authenticator](https://www.yubico.com/support/knowledge-base/categories/articles/yubico-authenticator-download/)

## Procedures
1. Install Yubico Authenticator
2. Launch Yubico Authenticator and insert Yubikey in USB slot
3. Select File > Add Credential at the menu bar on Yubico Authenticator
4. Launch Web browser and open the 2FA registration page of each Web service
5. Confirm the secret or some parameters for 2FA at the page, and then go back to Yubico Authenticator
  * Usually, the secret and parameters are provided by QR code
  * Please see "Key URI format at QR code" section below
6. Input name and the secret, select some credential type and then click "Add credential" button
  * You can use to click "Scan a QR code" button instead of inputting parameters manually
7. Go back to the registration page on Web browser
8. Input one time password generated by Yubico Authenticator
9. Congratulation! Complete to enable 2FA authentication by YubiKey

**Note: You may want to enable not only Yubikey, but also other app like Google Authenticator. Then, you need to set the secret the other app at same time.**

### Key URI format at QR code
According to [Key Uri Format at google-authenticator repositry](https://github.com/google/google-authenticator/wiki/Key-Uri-Format), Key URI format may be as follows:
```
otpauth://TYPE/LABEL?PARAMETERS
```

For this procedures, input/select the values on Key URI into the fields at Yubico Authenticator.

| Parameter of Key URI | Target field on Yubico Authenticator | Note                                      |
| -------------------- | ------------------------------------ | ----------------------------------------- |
| Label                | Name                                 | Input url-decoded value into target field |
| Secret               | Secret key                           | The value is encoded by Base32            |
| Types                | Credential type - OATH Type          | TOTP / HOTP                               |
| Digits (Optional)    | Credential type - Number of digits   | 6 / 8                                     |
| Algorithm (Optional) | Credential type - Algorithm          | SHA-1 / SHA-256                           |

## Links for 2 Factor Authentication
- Google
  * [Turn on 2-Step Verification, Google Account Help](https://support.google.com/accounts/answer/185839?hl=en)
  * [Install Google Authenticator, Google Account Help](https://support.google.com/accounts/answer/1066447?hl=en)
    + Setting up Google Authenticator on multiple devices
- Amazon
  * [Amazon.co.jp ヘルプ: 2段階認証について](https://www.amazon.co.jp/gp/help/customer/display.html/?ie=UTF8&nodeId=202025410) (in Japanese)
  * [Amazon.co.jp ヘルプ: 2段階認証の設定を変更する](https://www.amazon.co.jp/gp/help/customer/display.html/?ie=UTF8&nodeId=202073720) (in Japanese)
- GitHub
  * [Configuring two-factor authentication via a TOTP mobile app, GitHub Help](https://help.github.com/articles/configuring-two-factor-authentication-via-a-totp-mobile-app/)

# References
- Yubico
  * [Downloads Archives](https://www.yubico.com/support/knowledge-base/categories/downloads/)
  * [Documentation Archives](https://www.yubico.com/support/knowledge-base/categories/guides/)
  * [How to Use Your YubiKey With Authenticator Codes | Yubico](https://www.yubico.com/support/knowledge-base/categories/articles/how-to-use-your-yubikey-with-authenticator-codes/)
- [YubiKey製品一覧, CloudGate](https://www.cloudgate.jp/yubikey.html) (in Japanese)
- [秘密鍵、管理してますか? YubiKeyで鍵の一元管理とSSH接続、２段階認証の高速化を試す, Qiita](http://qiita.com/dseg/items/77d77467970b1b510285) (in Japanese)
- [QR Code Editor (in Japanese)](http://www.psytec.co.jp/freesoft/01/)
